#! clean build -dtOg 0 -W 9

name: phare
self: simulator pyphare

profile:
- name: init
  inc: src
       subprojects
  src: src/initializer/(.*_provider.*).cpp
  dep: lang.pybind11 mkn.kul
  mod: lang.python3
  out: phare_initializer

- name: core
  self: init
  src: src/core
  out: phare_core

- name: samrai
  self: core
  src: src/amr
  dep: llnl.samrai(https://github.com/dekken/llnl.samrai)
  out: phare_amr

- name: solver
  self: samrai
  src: src/solver
  out: phare_solver

- name: pyphare
  self: samrai
  src: src/initializer/pyphare.cpp
  out: pyphare
  install: build/src/initializer
  mod: lang.python3 lang.pybind11

- name: simulator
  self: solver
  src: src/simulator
  out: phare_simulator
  mod: lang.python3

- name: test
  self: simulator
  inc: tests
  dep: google.test
  main: tests/amr/messengers/test_messengers.cpp
  lib: hdf5_mpich
  link: -pthread
  mod: lang.python3
  env: PYTHONPATH=${MKN_ROOT}/build:${MKN_ROOT}/tests/amr/messengers:${MKN_ROOT}/src/phare:${MKN_ROOT}/subprojects
